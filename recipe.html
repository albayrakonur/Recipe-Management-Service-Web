<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Recipe Management Service</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <meta name="description" content="This is a Bil 495 Project which is about Recipe Management Service.">
    <meta name="msapplication-tap-highlight" content="no">
    <!--
    =========================================================
    * ArchitectUI HTML Theme Dashboard - v1.0.0
    =========================================================
    * Product Page: https://dashboardpack.com
    * Copyright 2019 DashboardPack (https://dashboardpack.com)
    * Licensed under MIT (https://github.com/DashboardPack/architectui-html-theme-free/blob/master/LICENSE)
    =========================================================
    * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    -->
    <link href="./main.css" rel="stylesheet">
    <script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5cfee3544351e90012650100&product=inline-share-buttons' async='async'></script>
    <link rel="stylesheet" type="text/css" href="css/jquery.tagsinput.css" />
    <link rel="stylesheet" href="css/lightbox.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.8.2/css/lightbox.min.css">
</head>

<body>
<div class="app-container app-theme-white body-tabs-shadow fixed-sidebar fixed-header">
    <div class="app-header header-shadow">
        <div class="app-header__logo">
            <img style="margin-right: 15%; height: 100%; width: 100%; object-fit: contain" src="assets/images/logo2.jpg">
            <div class="header__pane ml-auto">
                <div>
                    <button type="button" class="hamburger close-sidebar-btn hamburger--elastic" data-class="closed-sidebar">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                    </button>
                </div>
            </div>
        </div>
        <div class="app-header__mobile-menu">
            <div>
                <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                        <span class="hamburger-box">
                            <span class="hamburger-inner"></span>
                        </span>
                </button>
            </div>
        </div>
        <div class="app-header__menu">
                <span>
                    <button type="button" class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
                        <span class="btn-icon-wrapper">
                            <i class="fa fa-ellipsis-v fa-w-6"></i>
                        </span>
                </button>
                </span>
        </div>
        <div class="app-header__content">
            <div class="app-header-left">
                <form id="searchForm" class="form-inline my-2 my-lg-0">
                    <input id="searchKeyword" class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-primary my-2 my-sm-0">Search</button>
                </form>
            </div>
            <div class="app-header-right">
                <div class="header-btn-lg pr-0">
                    <div class="widget-content p-0">
                        <div id="loginBar" class="widget-content-wrapper">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="app-main">
        <div class="app-sidebar sidebar-shadow">
            <div class="app-header__logo">
                <img style="margin-right: 15%; height: 100%; width: 100%; object-fit: contain" src="assets/images/logo2.jpg">
                <div class="header__pane ml-auto">
                    <div>
                        <button type="button" class="hamburger close-sidebar-btn hamburger--elastic" data-class="closed-sidebar">
                                <span class="hamburger-box">
                                        <span class="hamburger-inner"></span>
                                </span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="app-header__mobile-menu">
                <div>
                    <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                            <span class="hamburger-box">
                                    <span class="hamburger-inner"></span>
                            </span>
                    </button>
                </div>
            </div>
            <div class="app-header__menu">
                    <span>
                            <button type="button" class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
                                <span class="btn-icon-wrapper">
                                    <i class="fa fa-ellipsis-v fa-w-6"></i>
                                </span>
                    </button>
                    </span>
            </div>
            <div class="scrollbar-sidebar">
                <div class="app-sidebar__inner">
                    <ul class="vertical-nav-menu">
                        <li class="app-sidebar__heading">BENİMSİN - BİL 495</li>
                        <li>
                            <a href="index.html">
                                <i class="metismenu-icon pe-7s-rocket"></i> Anasayfa
                            </a>
                        </li>
                        <li>
                            <a href="addRecipe.html">
                                <i class="metismenu-icon pe-7s-rocket"></i> Tarif Ekle
                            </a>
                        </li>
                        <li>
                            <a href="getRecipes.html">
                                <i class="metismenu-icon pe-7s-rocket"></i> Tarifleri Göster
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="app-main__outer">
            <div class="app-main__inner">
                <div class="app-page-title">
                    <div class="page-title-wrapper">
                        <div class="page-title-heading">
                            <div class="page-title-icon">
                                <i class="pe-7s-car icon-gradient bg-mean-fruit">
                                </i>
                            </div>
                            <div>Recipe Management Service
                                <div class="page-title-subheading">This is an System Development Project for Bil 495
                                </div>
                            </div>
                        </div>
                        <div class="page-title-actions">
                            1111
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="main-card mb-3 card" style="border-radius: 50px;  box-shadow: 5px 5px 5px #e1e1e1;">
                        <div class="card-body"><h5 class="card-title"></h5>
                            <!-- Page Content -->
                            <!-- Portfolio Item Row -->
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="main-card mb-3 card">
                                        <div class="card-body">
                                            <!--    <h5 class="card-title">Basic Bootstrap 4 Carousel</h5> -->
                                            <div id="carouselExampleControls1" class="carousel slide" data-ride="carousel">
                                                <div class="carousel-inner" id="recipePhoto">

                                                </div>
                                                <a class="carousel-control-prev" href="#carouselExampleControls1" role="button" data-slide="prev">
                                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                    <span class="sr-only">Previous</span>
                                                </a>
                                                <a class="carousel-control-next" href="#carouselExampleControls1" role="button" data-slide="next">
                                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                    <span class="sr-only">Next</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div id="recipeHeaderText">
                                    </div>
                                    <br/>

                                    <div id="likeSection">
                                        <button type="button" class="btn btn-lg btn-primary btn-block" onclick="recipeLikeFunction()">Tarifi Beğen</button>
                                    </div>

                                    <br/>
                                    <br/>
                                    <div id="recipeOperationsBar">

                                    </div>
                                    <div class="sharethis-inline-share-buttons" style="margin-top: 20px"></div>
                                </div>
                            </div>
                            <div class="mb-3 card" style="margin-top: 20px; border-radius: 50px">
                                <div class="card-header card-header-tab-animation">
                                    <ul class="nav nav-justified">
                                        <li class="nav-item"><a data-toggle="tab" href="#detailSection" class="active nav-link">Tarif Detayları</a></li>
                                        <li class="nav-item"><a data-toggle="tab" href="#mediaSection" class="nav-link">Tarif Medya</a></li>
                                        <li class="nav-item"><a data-toggle="tab" href="#tagSection" class="nav-link">Tarif Etiketleri</a></li>
                                    </ul>
                                </div>
                                <div class="card-body">
                                    <div class="tab-content" style="min-height: 200px;">
                                        <div class="tab-pane active" id="detailSection" role="tabpanel">

                                        </div>
                                        <div class="tab-pane" id="mediaSection" role="tabpanel">
                                            <div class="photo-gallery">
                                                <div class="container">
                                                    <div class="row">
                                                        <h3><u>Final Photos</u></h3> <br/>
                                                    </div>
                                                    <div class="row">
                                                        <div id="recipeMedia" class="row photos">
                                                        </div>
                                                    </div>
                                                    <hr>
                                                    <div class="row">
                                                        <h3><u>Cooking Steps</u></h3> <br/>
                                                    </div>
                                                    <div class="row">
                                                        <div id="recipeMediaCookingSteps" class="row photos">
                                                        </div>
                                                    </div>
                                                    <hr>
                                                    <div class="row">
                                                        <h3><u>Ingredients</u></h3> <br/>
                                                    </div>
                                                    <div class="row">
                                                        <div id="recipeMediaIngredients" class="row photos">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="tagSection" role="tabpanel">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.container -->
                </div>
            </div>
            <div class="app-wrapper-footer">
                <div class="app-footer">
                    <div class="app-footer__inner">
                        <div class="app-footer-left">
                            <ul class="nav">
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        Footer Link 1
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        Footer Link 2
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="app-footer-right">
                            <ul class="nav">
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        Footer Link 3
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <div class="badge badge-success mr-1 ml-0">
                                            <small>NEW</small>
                                        </div>
                                        Footer Link 4
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Sil</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p align="center">Tarif Silinsin mi ?</p>
            </div>
            <div class="modal-footer" id="recipeDeleteButton">
                <button type="button" class="btn btn-lg btn-secondary btn-block" data-dismiss="modal">Hayır</button>
                <input class="btn btn-lg btn-primary btn-block" id="buttonDelete" type="submit" name="submit" value="Evet" onclick="deleteRecipe()">
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Güncelle</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form class="" id="updateRecipeForm">
                    <div class="position-relative row form-group">
                        <label for="recipeName" class="col-sm-2 col-form-label">Tarif Adı</label>
                        <div class="col-sm-10">
                            <input id="recipeName" placeholder="Enter Recipe Name" type="text" class="form-control">
                        </div>
                    </div>
                    <div class="position-relative row form-group">
                        <label for="recipeDetails" class="col-sm-2 col-form-label">Tarif Detayı</label>
                        <div class="col-sm-10">
                            <textarea id="recipeDetails" class="form-control" placeholder="Enter Recipe Details"></textarea>
                        </div>
                    </div>
                    <div class="position-relative row form-group">
                        <label for="tags_1" class="col-sm-2 col-form-label">Tarif Etiketleri</label>
                        <div class="col-sm-10" style="border-radius: .25em">
                            <input id="tags_1" type="text" class="tags" />
                        </div>
                    </div>
                    <div class="modal-footer" id="recipeUpdateButton">
                        <button type="button" class="btn btn-lg btn-secondary btn-block" data-dismiss="modal">Close</button>
                        <input class="btn btn-lg btn-primary btn-block" id="buttonUpdate" type="submit" name="submit" value="Tarifi Güncelle">
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

<script type="text/javascript" src="./assets/scripts/main.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="assets/scripts/jquery.tagsinput.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.8.2/js/lightbox.min.js"></script>
<script>
    (function($) {

        var tabs = $(".nav nav-justified li a");

        tabs.click(function() {
            var content = this.hash.replace('/', '');
            tabs.removeClass("active");
            $(this).addClass("active");
            $("#content").find('.data').hide();
            $(content).fadeIn(200);
        });

    })(jQuery);
    $(document).ready(function() {
        $("#content").find('.data').hide();
        $("#content").find('#tab-eg115-0').show();
    });
</script>
<script type="text/javascript">



    $(document).ready(function () {
        //loginBar
        var cookies = document.cookie.split(";");
        var username;
        for (var i = 0; i < cookies.length; i++) {
            if (cookies[i].includes("username")) {
                var usernameCookie = cookies[i].split("=");
                username = usernameCookie[1];
            }
        }
        login_bar = document.getElementById("loginBar");
        if( !(document.cookie.includes("jwt") && document.cookie.includes("username")) ) {
            login_bar.innerHTML = "<div class=\"widget-content-left\">"
                + "<a class=\"nav-link\" href=\"login.html\">Login</a>"
                + "</div>"
                + "<div class=\"widget-content-left\">"
                + "<a class=\"nav-link\" href=\"signup.html\">Sign-Up</a>"
                + "</div>";
        }else {
            login_bar.innerHTML = "<div class=\"header-btn-lg pr-0\">\n" +
                "<div class=\"widget-content p-0\">\n" +
                "<div class=\"widget-content-wrapper\">\n" +
                "<div class=\"widget-content-left\">\n" +
                "<div class=\"btn-group\">\n" +
                "<a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" class=\"p-0 btn\">\n" +
                "<img width=\"42\" class=\"rounded-circle\" src=\"assets/images/avatars/noimage.jpg\" alt=\"\">\n" +
                "<i class=\"fa fa-angle-down ml-2 opacity-8\"></i>\n" +
                "</a>\n" +
                "<div tabindex=\"-1\" role=\"menu\" aria-hidden=\"true\" class=\"dropdown-menu dropdown-menu-right\">\n" +
                "<a type=\"button\" tabindex=\"0\" href=\"user.html\" class=\"dropdown-item\">User Account</a>\n" +
                "<a type=\"button\" tabindex=\"0\" href=\"index.html\" onclick=\"removeCookies()\" class=\"dropdown-item\">Cıkış</a>\n" +
                "</div>\n" +
                "</div>\n" +
                "</div>\n" +
                "<div class=\"widget-content-left  ml-3 header-user-info\">\n" +
                "<div class=\"widget-heading\">\n" +
                username +
                "</div>\n" +
                "<div class=\"widget-subheading\">\n" +
                "Benimsin Group Member\n" +
                "</div>\n" +
                "</div>\n" +
                "</div>\n" +
                "</div>\n" +
                "</div>"
        }
    });

    $( "#updateRecipeForm" ).submit(function( event ) {
        event.preventDefault();
        var button = document.getElementById("recipeUpdateButton");
        button.innerHTML = "<button type=\"button\" class=\"btn btn-lg btn-secondary btn-block\" data-dismiss=\"modal\">Close</button>" +
            "<button class=\"btn btn-lg btn-primary btn-block\" type=\"button\" disabled>\n" +
            "  <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n" +
            "  Guncelleniyor...\n" +
            "</button>";
        var cookies = document.cookie.split(";");
        var token;
        for (var i = 0; i < cookies.length; i++) {
            if (cookies[i].includes("jwt")) {
                var tokenCookie = cookies[i].split("=");
                token = tokenCookie[1];
            }
        }
        //console.log(token);
        var url_string = window.location.href;
        var url = new URL(url_string);
        var idParam = url.searchParams.get("id");
        $.ajax({
            async: true,
            crossDomain: true,
            url: "https://recipe-management-service.herokuapp.com/getRecipe/" + idParam,
            method: "GET",
            headers: {},
            success: function (data,textStatus,response) {
                //console.log(data.id);
                updateFunction(data, idParam, token);
            },
            error: function (xhr, status, err) {
                button.innerHTML = "<button type=\"button\" class=\"btn btn-lg btn-secondary btn-block\" data-dismiss=\"modal\">Close</button>\n" +
                    "                        <input class=\"btn btn-lg btn-primary btn-block\" id=\"buttonUpdate\" type=\"submit\" name=\"submit\" value=\"Tarifi Güncelle\">";
                alert("Gonderi Eklenirken Hata Olustu.");
            }
        });
    });

    function updateFunction(data, idParam, token) {



        var defaultName = data.name;
        //console.log(defaultName);
        var defaultDetails = data.details;
        //console.log(defaultDetails);
        var defaultTags = data.tags.toString(); // 1, 2, 3, 4, 5, 6
        //console.log(defaultTags);

        // ********************

        var name = document.getElementById("recipeName").value;
        var details = document.getElementById("recipeDetails").value;
        var tags = document.getElementById("tags_1").value;
        //console.log(name + " " + details + " " + tags);

        if (!name) {
            name = defaultName;
        }
        if(!details){
            details = defaultDetails;
        }
        if (!tags) {
            tags = defaultTags;
        }

        var data = new FormData();
        data.append("name", name);
        data.append("details", details);
        data.append("tags", tags);

        $.ajax({
            async: true,
            crossDomain: true,
            url: "https://recipe-management-service.herokuapp.com/updateRecipe/" + idParam,
            type: "PUT",
            headers: {
                "Authorization": token
            },
            processData: false,
            contentType: false,
            mimeType: "multipart/form-data",
            data: data,
            success: function(data, textStatus, response){
                window.location.href = "recipe.html?id=" + idParam;
            },
            error: function (xhr, status, err) {
                alert("hata");
            }
        });


    }

    $(document).ready(function() {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var idParam = url.searchParams.get("id");

        var mediaSection = document.getElementById("recipeMedia");
        var mediaSection2 = document.getElementById("recipeMediaCookingSteps");
        var mediaSection3 = document.getElementById("recipeMediaIngredients");
        var finalPhoto = "";
        var cookingStepsPhoto = "";
        var ingredientsPhoto = "";
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "https://recipe-management-service.herokuapp.com/getRecipe/" + idParam,
            "method": "GET",
            "headers": {
                "content-type": "application/json"
            },
            "processData": false,
            "data": ""
        }
        $.ajax(settings).done(function(data) {
            var operations = document.getElementById("recipeOperationsBar");
            var cookies = document.cookie.split(";");
            var username;
            for (var i = 0; i < cookies.length; i++) {
                if (cookies[i].includes("username")) {
                    var usernameCookie = cookies[i].split("=");
                    username = usernameCookie[1];
                }
            }
            //console.log("cookie: " + username + " photoUser: " + data.userName);
            if(data.userName.localeCompare(username) == 0) {
                operations.innerHTML =
                    "<button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" data-toggle=\"modal\" data-target=\"#exampleModal\">Tarifi Sil</button>\n"
                    +"<button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\" style=\"margin-top: .5rem\">Tarifi Güncelle</button>"
            }
            var header = document.getElementById("recipeHeaderText");
            recipeHeaderText.innerHTML = "<h3 class=\"my-4\">" + data.name + "</h3>";
            var detail = document.getElementById("detailSection");
            detailSection.innerHTML = "<p>" + data.details + "</p>";
            var tagsHTML = "";
            for (var i = 0; i < data.tags.length; i++) {
                tagsHTML += "<a href=\"search.html?keyword=" + data.tags[i] + "\">" + data.tags[i] + "</a>";
                if(i != data.tags.length-1) {
                    tagsHTML += ", ";
                }
            }
            tagSection.innerHTML = tagsHTML;
            var slider = document.getElementById("recipePhoto");
            var sliderHTML;
            for(var i = 0; i < data.photos.length; i++) {
                finalPhoto += "<div class=\"col-sm-6 col-md-4 col-lg-3 item\"><a href=\"" + data.photos[i].photoLink + "\" data-lightbox=\"photos\"><img class=\"img-fluid\" src=\"" + data.photos[i].photoLink + "\"></a></div>"
                if (i == 0) {
                    sliderHTML += "<div class=\"carousel-item active\"><img class=\"d-block w-100\" src=\"" + data.photos[i].photoLink + "\" alt=\"First slide\"></div>";
                }else {
                    sliderHTML += "<div class=\"carousel-item\"><img class=\"d-block w-100\" src=\"" + data.photos[i].photoLink + "\" alt=\"First slide\"></div>";
                }
            }
            for (var i = 0; i < data.ingredients.length; i++) {
                cookingStepsPhoto += "<div class=\"col-sm-6 col-md-4 col-lg-3 item\"><a href=\"" + data.ingredients[i].photoLink + "\" data-lightbox=\"photos\"><img class=\"img-fluid\" src=\"" + data.ingredients[i].photoLink + "\"></a></div>"
            }
            for (var i = 0; i < data.cookingSteps.length; i++ ) {
                ingredientsPhoto += "<div class=\"col-sm-6 col-md-4 col-lg-3 item\"><a href=\"" + data.cookingSteps[i].photoLink + "\" data-lightbox=\"photos\"><img class=\"img-fluid\" src=\"" + data.cookingSteps[i].photoLink + "\"></a></div>"
            }
            mediaSection.innerHTML = finalPhoto;
            mediaSection2.innerHTML = cookingStepsPhoto;
            mediaSection3.innerHTML = ingredientsPhoto;
            slider.innerHTML = sliderHTML;
        });
    });

    function deleteRecipe() {
        var button = document.getElementById("recipeDeleteButton");
        button.innerHTML = "<button type=\"button\" class=\"btn btn-lg btn-secondary btn-block\" data-dismiss=\"modal\">Hayır</button>" + "<button class=\"btn btn-lg btn-primary btn-block\" type=\"button\" disabled>\n"
            + "<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n"
            + "Siliniyor...\n"
            + "</button>";
        var cookies = document.cookie.split(";");
        var token;
        for (var i = 0; i < cookies.length; i++) {
            if (cookies[i].includes("jwt")) {
                var tokenCookie = cookies[i].split("=");
                token = tokenCookie[1];
            }
        }
        console.log("token: " + token);
        var url_string = window.location.href;
        var url = new URL(url_string);
        var idParam = url.searchParams.get("id");
        $.ajax({
            async: true,
            crossDomain: true,
            url: "https://recipe-management-service.herokuapp.com/deleteRecipe/" + idParam,
            type: "DELETE",
            headers: {
                "content-type": "application/json",
                "Authorization": token
            },
            processData: false,
            data: "",
            success: function(data, textStatus, response){
                window.location.href = "getRecipes.html";
            },
            error: function (xhr, status, err) {
                var button = document.getElementById("recipeDeleteButton");
                button.innerHTML = "<button type=\"button\" class=\"btn btn-lg btn-secondary btn-block\" data-dismiss=\"modal\">Hayır</button>\n"
                    + "<input class=\"btn btn-lg btn-primary btn-block\" id=\"buttonDelete\" type=\"submit\" name=\"submit\" value=\"Evet\" onclick=\"deleteRecipe()\">";
            }
        });
    }

    function recipeLikeFunction() {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var idParam = url.searchParams.get("id");

        var cookies = document.cookie.split(";");
        var username;
        var token;
        for (var i = 0; i < cookies.length; i++) {
            if (cookies[i].includes("username")) {
                var usernameCookie = cookies[i].split("=");
                username = usernameCookie[1];
            }
            if (cookies[i].includes("jwt")) {
                var tokenCookie = cookies[i].split("=");
                token = tokenCookie[1];
            }
        }
        //console.log(username + " , " + token);
        $.ajax({
            async: true,
            crossDomain: true,
            url: "https://recipe-management-service.herokuapp.com/liked/" + idParam,
            type: "GET",
            headers: {
                "Authorization": token
            },
            success: function (data, textStatus, response) {
                alert("Tarif Beğenildi.");
            },
            error: function (xhr, status, err) {
                alert("Begenmek icin üye olmanız gerekiyor.");
            }
        })
    }

    $(function() {
        $("#searchForm").on("submit",function(e){
            var keyword = document.getElementById("searchKeyword").value;
            var keywordLink = "search.html?keyword=" + keyword;
            window.location.href = keywordLink;
            e.preventDefault();
        });
    });

    function removeCookies() {
        var res = document.cookie;
        var multiple = res.split(";");
        for(var i = 0; i < multiple.length; i++) {
            var key = multiple[i].split("=");
            document.cookie = key[0]+" =; expires = Thu, 01 Jan 1970 00:00:00 UTC";
        }
    }
</script>

<script type="text/javascript">

    function onAddTag(tag) {
        alert("Added a tag: " + tag);
    }
    function onRemoveTag(tag) {
        alert("Removed a tag: " + tag);
    }

    function onChangeTag(input,tag) {
        alert("Changed a tag: " + tag);
    }

    $(function() {

        $('#tags_1').tagsInput({width:'auto'});
        $('#tags_2').tagsInput({
            width: 'auto',
            onChange: function(elem, elem_tags)
            {
                var languages = ['php','ruby','javascript'];
                $('.tag', elem_tags).each(function()
                {
                    if($(this).text().search(new RegExp('\\b(' + languages.join('|') + ')\\b')) >= 0)
                        $(this).css('background-color', 'yellow');
                });
            }
        });
        $('#tags_3').tagsInput({
            width: 'auto',

            //autocomplete_url:'test/fake_plaintext_endpoint.html' //jquery.autocomplete (not jquery ui)
            autocomplete_url:'test/fake_json_endpoint.html' // jquery ui autocomplete requires a json endpoint
        });


// Uncomment this line to see the callback functions in action
//			$('input.tags').tagsInput({onAddTag:onAddTag,onRemoveTag:onRemoveTag,onChange: onChangeTag});

// Uncomment this line to see an input with no interface for adding new tags.
//			$('input.tags').tagsInput({interactive:false});
    });

</script>

</body>

</html>