<!doctype html>
<html lang="tr">
    <head>
	  <title>Recipe Management!</title>
	  <!-- Required meta tags -->
	  <meta charset="utf-8">
	  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	  <!-- Bootstrap CSS -->
	  <link rel="stylesheet" href="css/bootstrap.min.css">
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	  <script src="js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
	<style>
		.carousel-caption > p {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}
		.carousel-control-next-icon, .carousel-control-prev-icon {
			background: none !important;
		}

		.carousel-control-next-icon > i, .carousel-control-prev-icon > i {
			font-size: 50px;
			color: white;
			background-color: gray;
			padding: 5px;
			border-radius: 5px;
		}
	</style>
	<body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="/homepage.html">BENİMSİN</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="homepage.html">Anasayfa <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                                <a class="nav-link" href="addRecipe.html">Tarif Ekle</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="getRecipes.html">Tarifleri Göster</a>
                        </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" id="recipeTags" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit" onClick="searchRecipe()">Tarif Ara</button>
                </form>
            </div>
        </nav>

		<div class="container">
			<h1 class="font-weight-light text-center text-lg-left mt-4 mb-0">Recipe Management Service</h1>
            <hr class="mt-2 mb-5">

			<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
			  <ol class="carousel-indicators" id="listElement">
				  <!-- -->
			  </ol>
			  <div class="carousel-inner" style="border-radius: 10px" id="itemBody">


			  </div>
			  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"><i class="fa fa-angle-double-left" aria-hidden="true"></i></span>
				<span class="sr-only">Previous</span>
			  </a>
			  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"><i class="fa fa-angle-double-right" aria-hidden="true"></i></span>
				<span class="sr-only">Next</span>
			  </a>
			</div>
		</div>

		<script>

			$( document ).ready(function() {
    			//alert("Ready!");
				var settings = {
				  "async": true,
				  "crossDomain": true,
				  "url": "https://recipe-management-service.herokuapp.com/getRecipes/",
				  "method": "GET",
				  "headers": {
					"content-type": "application/json"
				  },
				  "processData": false,
				  "data": ""
				}
				$.ajax(settings).done(function (data) {
				  	console.log(data);
					var itemList = document.getElementById("listElement");
					var itemListHtml = "";
					var itemBody = document.getElementById("itemBody");
					var itemBodyHtml = "";
					var i;
					var count = 1;
					for(i = data.length-1; i >= 0; i--) {
						var urlParam = "recipe.html?id=" + data[i].id;
						if(i == data.length-1) {
							itemListHtml += "<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\"></li>";
							itemBodyHtml += "<div class=\"carousel-item active\">" + "<a href=" + urlParam + "> <img class=\"d-block w-100\" src=\"images/makarna.jpg\" alt=\"First slide\" style=\"max-width: 100%; height: 500px; margin: auto;\"> </a>" + "<div class=\"carousel-caption d-none d-md-block\">" + "<h5>" + data[i].name + "</h5>" + "<p>" + data[i].details + "</p>" + "</div></div>";
						}else {
							itemListHtml += "<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"" + count + "\"></li>";

							itemBodyHtml += "<div class=\"carousel-item\">" + "<a href=" + urlParam + "> <img class=\"d-block w-100\" src=\"images/makarna.jpg\" alt=\"First slide\" style=\"max-width: 100%; height: 500px; margin: auto;\"> </a>" + "<div class=\"carousel-caption d-none d-md-block\">" + "<h5>" + data[i].name + "</h5>" + "<p>" + data[i].details + "</p>" + "</div></div>";
							count += 1;
						}
					}
					//alert(itemBodyHtml);
					itemList.innerHTML = itemListHtml;
					itemBody.innerHTML = itemBodyHtml;
				});
			});


		</script>
  </body>
</html>